language: ruby

cache:
  - bundler

rvm:
  - 2.6.1

script:
  - docker build . -t dshivang0/photoapp_api:latest
  - docker run dshivang0/photoapp_api:latest rails db:migrate
  - docker run dshivang0/photoapp_api:latest rspec
  
env:
  global:
  - secure: XP89nl2pTeFPtPXijv68P8QWVDB50QtbecUT+jNYVqgGDup3TuzJsm83qDOoWsUqeXGXW0vH/wY/Hi1QCFDTDngdDxMcFH4ZkuxMVhkoJrFD24EzXrkWIdGAWVb9lz4doQgPjjHLgeRg5MiPUHOe2rzzPG9WLYV428c37c5+sxszr8NAGEx7Is5G9f8H29ofFKebb+9Yi4EQaImdXIso7tguWAzC1UM5bg+wS9Lb7bf5iKTh5dTUiBuwyPeHMMoSE2m1iJNndldVVlRxSGTlapWdLjzsEue7HupyLAgiEqeXFqElXnfqW3+6B9ErRJB3DxU7LKi+jfd43LVgebO17vMZZNlw5e/G2e0EmfWP5cSEksS9irHfrD7Yp7ubI/sG4O+OLysEXasguaXnsaLBnGfTBI38pM8FkoWPdK6+T2t9jYQkTyAk6AE3QAh8bHpI3aGpDt/KoLc4lX7gkgjrsoRrKgzBr+2AWFCoOhT4WzgbAlGV3NzufwIJb7gjtFYAcjtHBs/9IA5Rq96aF4DGK318+dOm8w4MroaMBFMIg1NMLpLYOGjU7HPQio2lAwUH0Guh5nMv6B7n5qeSO0qyORjKCOdMvjzP7vYCprmgHrtUnQueGxPl2AC2LDY70cP9hny7ZyjFYZR/Z6D/4npCeNbGpzB+YG0xguV3WLmjaIg=
  - secure: x5O0PODI8a+ZdiV1IPP9RG0aTinFOK6274/KsBG+aE1/wtENFuRQIyaIocdGPFDG9jx4epjE59Dwtks/o+m3XxYoPeQ+tt+Qr2Z1N+6PKtRsq5huix11mXKLWmNWnG1DcBMhXedAt72yrgV9fc7I7nMU2yJb72bOQCAjb5nhqugw0eWKPgicbUtau4CD01zLXToDomkgizRv+ENX9I4trW9g3PSoPWH6ir1S+LV/KvhYrYLAeXkz1kRY36SBu5xslWS7o6asyQOAV/xfW8R5wrS5dHy+8CLztxzzNljPXkiaCPx3qQMQlg+cQc4GuUbaWYD8v/lyFwXriaFXVhlcal6mDohdX2p4zdaeh0JdOIAC7VN9Nc76jMJWI5VsJvr9tcCYGixb3+vVdRqaPVDWKx0SdXbf6BTQ2OE52cV+lps1PlrHTHWO9tWWfsru37VC3sHx1XsWOQBsG7AYDMInjt5QnPu5wkvd9XpPcNNwEiIVKb3ZF/1NxS8gImTUmYOgEq5zdrLeAwfhJXRiIaCNBCC8N/tB3yUmmyv0dIXSNxoQEZf58HUEaXCx3a2yLZ75i6T6D7NE+LT34aVRslhWXJUii406mQE3ta2YzA6KPxSrtnUH7nHxBz5KhMjVEprS3UrLQB+5DriYDAS6o+MptAJA+CO7lV9fTCeMobulXXs=
  
  - secure: "EW3cvPkxLb++1IApkPw2Lwf5leNudQ6yvU2LXcRH0qS8ZuR2oe2swX4yj66iQ8qOj6PqGbZPl5R4kF5DYnBG8Ogr8FOadNekcmmzCqKcLeyVAE1pXvAdAAz00cqrmUpkSGW67Tuhz7ltKVELvE7Bt23YQyF0yY94RXJ/5fZfz051p9gZlGiwKT9bl1uZJjNcWwtk9sYE/48PdSX8vh1w/StE6bD3q+V6QSOlGN0x8cT6SiU+TT3hq9VWET3z56MBkSrKwUpjXhRUjAPwHRlZpV0lVLtgeh4ny/fUHI0qDSkqPo9sV15yTdtAtu5D3++eLnDt+b7fopRfWyhl2dF8Yy5QbzRKspndiKjL6wVPoa44BSsaXvusNfG+2tPSoGRhnb1M2qX/DhnJSh/JmGVsGQRTWTrfsgM8gd+nooojguoTeUPDr57Hu+gMHvnre2zKbB57NjPp4jkaBgDb0gQVn1Eh5anpwVlMKaaqsPLQT+8tr3Yi+4Ellhx00xs34BkkEhfLVj12CUn6i59c+LO2Gi9SeYCCkpAxQMJr78jdZrmf0amJkjrmmrFPjtEqYTpijbuvqLpkrvmZYeQGmUUYHH9hKkp4jUL3o0C5lUUUPdJFWKFQUKZmjUq7BsSL7KX4cGkVbGAY+4u3IJI2mwYKJ3QHQF2WjJALj2lMtp+BN/w="
  - secure: "iSzdm/RO/yzbbQnBP50ZgGr4n5Dz7mjtpZsjsMo7S3BtJ+YEZnI3cqvab8Ne13TDrfeaXnqlI69vuqz0ONbsrjNK2+KiMJ4kMYElT1mU08eSYKUqMa1vfRKZDGCUUGAvHZ7GYuHZwqH0/3/IdZoHNqWE3nY9ItdIX5lzS8Nfau94Ord18jc474C02VvKi7AfFrsVPJQiBWlzgQyi3p3z1XmWZdkvkffoOc2PTTJ6VTpvtd4u5+rx6ybxfGBJwBFkBIQfDL40mgMYu9eg/wU53k1WM+BsFNBo7thGi3BeJgxtw/4zDZqReoie7GPCRTDOOTrW5XhBHz0cRmf7fjW3Wfn+CrbHZYlKp/J0MgM04MIypB8uATE0X6xMX5MiHnX4paedziyKj5NrCEa2kCYqMZRM8Vp1NWdCJbBGUxYF3mgLiU3ZNBzr8pyI2F3D9OJVowSCWiM0xze8v6/L1aN7FR47P0z3EIrUFdAp9bE2ezPynhtNOPJRyP9DBJjfeVfpmkX3XerWciUo5Pm3dF7RI4TW9Qx/QSp3rP+0bIruiBI7h8Wbg2KsxYaOnbpL74tzPAw2uSbBnnVtZmSR5qJ2bv09ftTCRW9J2GzwPANTyhZ8AIPbbovEnoekC6Sa8mVtMG+d/+MlZhsF4sNxi3U+WfMF+lNG5upCaSeLPEV71Ok="
  - secure: "Ha7Wut8AL3gaoRUpHApExTvSj1XVm25On8i0GJWnNYz5BtrZntN0cm0NEZyCXP7Ik5aOXk8nrvxkMlm0HPmsYIiFD8WMHekoprQM2RNgkqu1zqD3H1lozk0rtgG2+BhJxOZDANVJbor+PpeeOw8zvzNbcAOd7wKx+TjZWtORgtng7FrWZ9h29dz0H4awqrNuwW3gq2cCXQANa0bffcBaiCDovqpAZx4kPisk06cBZ/F04FW89lq+aiRM3lHSxZSp0gREijRQt7R2nvM/eRWcmbYeb0p6RT8kxYZm/B8K511D73RSG449EIUsYr4Akl8WCOC4lH+wub38Lvm4hjz3ar7T4HOwSe6SzH4wGYHrE02srNe+ECz5Jyi2vSuaAeqFVS3qO5MPSNuURdQwi7G5rPi/PcGB9P/I/yXkfib2ydu+/E1N/oYQ4JE64VkEZlT2zeXflSrgt2kuVOqofismftuE/2xXl8nrqu52xi+LYzTXmEt7SlKlMZ32ZLJBCg9J06yOKOBf3ZcJPtRT+6U7IQw3dakYY/pb2xXJMuBul3iyroJAH6M8t+XMHvBKzxgVgyI3t8KsuCgun3kW0KQne8Oi9RVqSaogYVVyRlC4cfIYjIkrRZiR7Vq1caL84lxB3tJEXSi16OHybuvW4Xo2qavwTpI4WGqDslNF11cLvuM="
  
  - secure: "sywTOH29ab30MnNOFKhp7a9lZfR5vCTXUcqWENJZ6gmBivFwAJ866RPcKFhYF6lMIJc6+Cojg8fRtdWxBD5wTapMoXLc6BWi6h4s0hTNBMhqPg+U1EMwAxIjPzvu2E16TLKEGNiEo+KOGAiZohpSJfZgammjUpRSrG2TYuqZBMa1AgTq3p8pr8jtuJkRe3m+xJ1C6UNyHtpec3y3UINSUL3P1z71eaC97EVhXNa0txN4C0mJ0AwZUIkIxW59kPTOvLAJ/5oGD7eX/a5sRwtP5O8x8SwPgMRkfrJDQzGwjiPnQKo+ycbW1wgIKYA/etIdIW7pa6MmX3CWF1CwdK15wogXnpmA6jcYFDwkx3JEYNSKv+rfNQstxa/mBklo+K4MWzx7714lnN6e0mPoTNGsvZY5D46eEcqFdTiHFKwp8bQk+3JdDj6QoHudbA7MvbzN8I/OT7XF+4UUYpqoTd0QZdIRxZeTimstWjkFw5AsyomYfnvKt3eotqvTnPPxJPrUZhiG9hMhnWHRv/9KUawL0gc656kSDCULKnVVzxQkca9JYxLY/5LuRA/3vQNKMS/FtBkJyFZ4tzg3zDZu04zePry57Wsv7nAPkz+bcb7tJ/YOqnZc3/9CShhJ1K7yv7XsbDSEDVg+Ogs39fqJrqOtjenERKjfSCxiALN4uVEUga4="
  - secure: "B9jUu3hTs42SF2TuXayITbLRhj2bi8p7kG/GlzR0Kagf9ugEnRO8oUynH1QWXYzhUg8kWcCsTiTDJv8vJbFLrtoDFvr1jU21KCsTZJSrwdc9kDTMv/Ce8OQu7Q8C5/qlUae8BBYzUg2HkNaVIG5+T5O7G3h+YK2W++KUf/+2GRgSxFEn960nE/dl/ipg8pFx5Rdi11mIxjeXoBnK7zli/4ApwNTgyrhDMv1eOzgED4aZ3+V+Zd6ANk7jXKXu9DUlocq++4xnaU/zb4H0GP1ScHn9N2qzzxspeNkYbiAAZhf9kZZkQ5PSzz7Z/ZsHn7j0tKVys/7lxQkZgXvHFURFKaqWGIhNY2bMShjEneXxauBlXaeinPFPhjiyWgmq10h28gZT5gaCGWZocpQt84HS/YLIIyhAheRmRktxuGeAb9136/dbeD+zBh3nGB7O3OtBr05Ti6N5LPzDtS9snaqmxhHZZwHmEF1Etiv7G0uRdqJa8BEAzyQGqs+fgcBlnUu0vIPiWzL8YoXQaL/qN/eWzHp47+ToP0A05AAWYA08plSwX6nVkvuamNJeQckYBqJzr52rc/m3oD3alMxK38aO2deXE75uzzEUlUk8+eUKS24UhftwGi2ENWVp4Z6dDC7gNGq6MqHxGEV9esgj/U+sroQgpZKWhYWW8VPEFsZ7kh0="
  - secure: "STddotzTRQU+LvNCWG0fPH2N0LcADtxmzEDqXiYdk1Ehyl5+HjAqt4fQ/4jxf0h5aYiozp25pB9gNtUo+n0Cb1YlTIjAQ4Zlunb0uxO47/k/NMNKUDe3xepfbbFuoJkwWP/TY3iuzomTF9OPNMZBChAldqZVflzBYxKn9ZlVAr5XQfwmWYF1+EErIXtCcjD+vlsk2If01v3cIZjQhg6Iu0vIQ+gCwtoXzZGxEdLmwgDKvYj5zxr1FgxaHk+LBz9K/v0CxVd3a5+23dskGQgZ998B4/F2Moyvcenn4icu0zy16q9A3VYXRw0a6YtnWVlj2qDG78gz7Cr5BBVzKDMYfoIKIHYuuj0fcrZBsY0nvlkM29cPekK4SPVwMFuCyLdpoFZv76CsyHMd1dfgWQqd6B7gsYlQlV5HwsxGK8VfjGXkxPMTb5HSulXcM7zdyf5mP0n2Le6u79ji1m1J2HMY33sfJ3NNV0mco6tY5IhVqF9XQCCTHuleoy6GS1uOOZ3EIWkRgyvylcHhHScHkhTka12ZAOl0md+3Z2JgUALaYK5/diEWOGQMDEEEVSUeJA9+jSxX/m5tn06v4qT5oz10MIDBpo7ZNmFE5SUAXFZpBC4XesRSHxzGeQP1VxbEkTMwaa3CuBIaW5CIaYuorjzGPPQDITkWrW3YtYbv9qkINc8="
  
  - secure: "ZB2Z9fDturnqMIIKQIe/4gX5IHgpSLF/Gmx3TbbutYG96znxmeaMZKngsFrOeWIzvpvNXB5sWqX8Mekr82/GBgAScfNWkhqWKO9HKbUgr1GwOBJKLr2gdjjWS8XeP1+qt00enDfhv9Xi339DgYSZMzSGGaALsJ2YuTvCm2ak9QBUMJZPJLkF4SkzXYBrKY0vJcuoHvqYIORo6q8pnUaJAnKwb7CUdGy/Dje7DKqh30Agu4rHdyy9DEGsqosuoU1XqTDpegA0m4dRxsaKZuTpYyFqqUf9+/K251O6oupTmVGQ/MnLbF8Z8OOJYX9HO9ZMJFLSGJoIl/FXo9zw4+lVGS3MOZYsU0Ce0b5KsRJdzmVVIbU6MoAUt/rOKOYynOuSA6HNT3yjP2vbV9umpc7lPySp9P7bY2zMCebNcaMSSVIMkFpl5OVcz9FaQeO4QJlxWU9QmGSO0vil67fc6ZArAzodHHk4L8TzrJMh9FD+TnGezQ4KDX0bD5dYmnqbzJYzhpxZtsc7l+tP4cDgbpSkydsWChWl3hmtp+osGD7fCe2QaL859vwRCbAUjvNBqs8gb2YNtpfW77e1KPKPn7j8MvX8lUPGBy7lUlM1QcMhhUoX0ZpO2MQ9B3v0roTzj9Cs5cFkJP4DGrB8ItFilUydPfh0e59NU/QTtkw4bk5dqS8="

deploy:
  provider: heroku
  api_key:
    secure: "KtZdPa3iJAFRsq/max6vaApVlZ13q6lCVjfEBES+Prrv+yV0K+bFoXaGk1C+QozyJT9RWsybyYRUb4XV6TsHi7avViM3T8upPN2wNwpLvxMsAWsQIRxjleseD7H3ltsb+mrrrclUaSQm6VkAnIUui0W/kRGEohjYowe0BNTTCvYxJ4bZ0+Cfnvln05pZKSmgkgxXDj8haiqhZRIXV9WAVd8l8UolYl8MKYoDyIj8Actgc1MYfG8QXjcDrBe9JTRX9vhqT5l7XwaPGt3LiO+L4rXpjugwRtCohUz7sx1HGKnmauOYj5Ywwz6fQFrmJoPyztncD6UayOeF2l9ETBkHdYYWYvp8gy6drhaXGRnvhlcspRTPvSs23GXl5MzI33u3NIbbuxBfvaT9RUvMlVCsoI36/9GNaAMGhnedPL9mVsOoWtexZIcOUorGsAjJ636qfDuTPe7Md+GfLYX8XKMZMQdzEm2tA/vlhdxjotPDPt9NLWn4EQmDM/5MhB4jnEJUIwD6iDMlxi8DrHCGmIP8m4mTePr+vFo2OXnS+jRmriJC5LOI7M5AZhW420tAN/+edx4z9ABUkrJ2X1fSk6+mTrYyyBougeiY4PF3Z2cFR0dQvatxsIjJmcmOiEgQIImxjN332vmpTbBbo0Alub/xkf0HrpnNCjVipMKhNt0xJlc="
  app: photoapp-api
  on: master